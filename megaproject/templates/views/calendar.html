<div id='calendar'></div>

<script>
  $(document).ready(function () {

    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();

    var calendar = $('#calendar').fullCalendar({
      header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
      },
      selectable: true,
      selectHelper: true,
      select: function (start, end, allDay) {
        var title = prompt('Event Title:');
        if (title) {
          calendar.fullCalendar('renderEvent',
             {
               title: title,
               start: start,
               end: end,
               allDay: allDay
             },
             true // make the event "stick"
          );
        }
        calendar.fullCalendar('unselect');
      },
      editable: true,

      eventClick: function (event) {
        // opens events in a popup window
        window.open(event.url, 'gcalevent', 'width=700,height=600');
        return false;
      },

      loading: function (bool) {
        if (bool) {
          $('#loading').show();
        } else {
          $('#loading').hide();
        }
      },


      eventSources: [

        // your event source
        {
          url: '/events',
          type: 'POST',
          data: {
            custom_param1: 'something',
            custom_param2: 'somethingelse'
          },
          error: function () {
            alert('there was an error while fetching events!');
          },
          success: function (data) {
            console.log(data)
          }
          //color: '#eee',     // a non-ajax option
          //textColor: 'black' // a non-ajax option
        },

        // any other sources...
        // 'http://www.google.com/calendar/feeds/usa__en%40holiday.calendar.google.com/public/basic'

      ]

    });

  });

</script>
